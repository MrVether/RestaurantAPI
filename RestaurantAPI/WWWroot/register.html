<form id="register-form">
    <div>
        <label for="email">Adres e-mail:</label>
        <input type="email" id="email" name="email" required>
    </div>
    <div>
        <label for="password">Hasło:</label>
        <input type="password" id="password" name="password" required>
    </div>
    <div>
        <label for="confirmPassword">Potwierdź hasło:</label>
        <input type="password" id="confirmPassword" name="confirmPassword" required>
    </div>
    <div>
        <label for="nationality">Narodowość:</label>
        <input type="text" id="nationality" name="nationality">
    </div>
    <div>
        <label for="dateOfBirth">Data urodzenia:</label>
        <input type="date" id="dateOfBirth" name="dateOfBirth">
    </div>
    <div>
        <label for="roleId">Rola:</label>
        <select id="roleId" name="roleId">
            <option value="3">Administrator</option>
            <option value="2">Menadżer</option>
            <option value="1">Użytkownik</option>
        </select>
    </div>
    <button type="submit">Zarejestruj</button>
</form>


<script>
    const registerForm = document.querySelector('#register-form');

    registerForm.addEventListener('submit', async (event) => {
        event.preventDefault();

        const emailInput = document.querySelector('#email');
        const passwordInput = document.querySelector('#password');
        const confirmPasswordInput = document.querySelector('#confirmPassword');
        const nationalityInput = document.querySelector('#nationality');
        const dateOfBirthInput = document.querySelector('#dateOfBirth');
        const roleIdInput = document.querySelector('#roleId');

        const email = emailInput.value;
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;
        const nationality = nationalityInput.value;
        const dateOfBirth = dateOfBirthInput.value;
        const roleId = parseInt(roleIdInput.value);

        if (password !== confirmPassword) {
            alert('Wprowadzone hasła nie są identyczne.');
            return;
        }

        const data = {
            email: email,
            password: password,
            confirmPassword: confirmPassword,
            nationality: nationality,
            dateOfBirth: dateOfBirth,
            roleId: roleId
        };

        try {
            const response = await fetch('/api/account/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            if (response.ok) {
                alert('Rejestracja użytkownika przebiegła pomyślnie.');
            } else {
                const error = await response.json();
                alert('Wystąpił błąd podczas rejestracji użytkownika: ' + error);
            }
        } catch (error) {
            alert('Wystąpił błąd podczas rejestracji użytkownika: ' + error);
        }
    });


</script>