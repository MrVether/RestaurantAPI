<html>
<head>

</head>
<body>
    <form id="loginForm">
        <input type="email" name="email" placeholder="Email">
        <input type="password" name="PasswordHash" placeholder="PasswordHash">
        <button type="button" onclick="sendLoginRequest()">Login</button>
    </form>
</body>
</html>
<script>

    function OnCreate() {
        var form = document.getElementById('loginForm')
        form.addEventListener('submit', (e) => {
            e.preventDefault()
        })
    }

    function sendLoginRequest() {
        const loginForm = document.getElementById("loginForm");
        const email = loginForm.elements["email"].value;
        const password = loginForm.elements["PasswordHash"].value;

        const loginDto = {
            email: email,
            PasswordHash: password
        };

        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/api/account/Login", true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.onreadystatechange = function () {
            if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                const token = this.responseText;
                localStorage.setItem("token", token);

                alert(token);
                alert("User logged in!");

                window.location.href = "/Home/Index";
            }
        };

        xhr.send(JSON.stringify(loginDto));
    }
    OnCreate()
</script>